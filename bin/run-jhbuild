#!/usr/bin/env python

from build_config import ConfigHelper
from subprocess import call
import sys
import os

config_helper = ConfigHelper()
jhbuildrc = config_helper.jhbuildrc

def main(argv):
  arguments = argv[1:]

  if arguments[0] == 'shell':
    os.environ["TEST_RUNNER_INJECTED_BUNDLE_FILENAME"] = os.path.join(config_helper.build_dir, "Debug/lib/libTestRunnerInjectedBundle.so")
    os.environ["TEST_RUNNER_TEST_PLUGIN_PATH"] = os.path.join(config_helper.build_dir, "Debug/lib/plugins")

  jhbuild_cmd = ["jhbuild", "-f", jhbuildrc] + arguments
  call(jhbuild_cmd)

if __name__ == '__main__':
  main(sys.argv)


